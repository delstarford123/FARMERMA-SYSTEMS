{% extends "base.html" %}

{% block extra_css %}
<style>
    .error-container {
        perspective: 1000px;
    }
    .error-code {
        font-size: 10rem;
        color: var(--primary-green);
        text-shadow: 10px 10px 20px rgba(0,0,0,0.1);
        opacity: 0;
    }
    .error-message, .error-btn {
        opacity: 0;
    }
</style>
{% endblock %}

{% block content %}
<div class="container d-flex flex-column align-items-center justify-content-center min-vh-100 text-center error-container">
    <h1 class="fw-bold error-code">404</h1>
    
    <h2 class="fw-bold mb-3 error-message">
        <span id="error-typewriter"></span><span class="typewriter-cursor">|</span>
    </h2>
    
    <p class="text-muted mb-5 px-4" style="max-width: 500px;">
        It looks like the agricultural data you're looking for has moved or the link is broken. Let's get you back to the main dashboard.
    </p>

    <div class="error-btn">
        <a href="/" class="btn btn-success btn-lg px-5 fw-bold rounded-pill shadow-lg magnetic-btn">
            Return to Homepage
        </a>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/TextPlugin.min.js"></script>

<script>
    gsap.registerPlugin(TextPlugin);

    // 1. Perspective Entrance for 404
    gsap.to(".error-code", {
        opacity: 1,
        z: 0,
        startAt: { z: -1000, rotationX: 45 },
        duration: 1.5,
        ease: "elastic.out(1, 0.3)"
    });

    // 2. Continuous Floating Loop for 404
    gsap.to(".error-code", {
        y: -20,
        duration: 2,
        repeat: -1,
        yoyo: true,
        ease: "sine.inOut"
    });

    // 3. Typewriter Error Message
    gsap.to("#error-typewriter", {
        text: "Lost in the Field?",
        duration: 1.5,
        delay: 0.8,
        onStart: () => gsap.set(".error-message", { opacity: 1 })
    });

    // 4. Button Fade & Scale
    gsap.to(".error-btn", {
        opacity: 1,
        y: -10,
        duration: 1,
        delay: 2,
        ease: "back.out(1.7)"
    });

    // 5. Magnetic Button Interaction
    const btn = document.querySelector(".magnetic-btn");
    btn.addEventListener("mousemove", (e) => {
        const rect = btn.getBoundingClientRect();
        const x = e.clientX - rect.left - rect.width / 2;
        const y = e.clientY - rect.top - rect.height / 2;
        gsap.to(btn, { x: x * 0.4, y: y * 0.4, duration: 0.3 });
    });
    btn.addEventListener("mouseleave", () => {
        gsap.to(btn, { x: 0, y: 0, duration: 0.3 });
    });
</script>
{% endblock %}