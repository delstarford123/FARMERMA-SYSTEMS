{% extends "base.html" %}

{% block extra_css %}
<style>
    :root {
        --plant-green: #2E7D32;
        --soil-brown: #5D4037;
        --sky-blue: #0288D1;
    }
    .text-success { color: var(--plant-green) !important; }
    .bg-success { background-color: var(--plant-green) !important; }
    .btn-success { background-color: var(--plant-green); border-color: var(--plant-green); }
    .btn-outline-success { color: var(--plant-green); border-color: var(--plant-green); }
    .btn-outline-success:hover { background-color: var(--plant-green); color: white; }
    
    /* Prevent flickering */
    .intel-lead, .intel-btns, .risk-item, .preview-card, .cta-title, .cta-text, .cta-btn {
        opacity: 0;
    }
</style>
{% endblock %}

{% block content %}
<section class="py-5 overflow-hidden text-white text-center" style="background-color: var(--soil-brown);">
    <div class="container py-5">
        <h1 class="display-5 fw-bold text-success mb-3 intel-title">Agricultural Market Intelligence</h1>
        <p class="lead max-w-75 mx-auto text-light intel-lead">Stop guessing. Start planning. Access real-time commodity prices, supply chain trends, and AI-driven forecasts across Africa.</p>
        <div class="mt-4 intel-btns">
            <a href="/pricing" class="btn btn-success btn-lg px-4 me-3 magnetic-btn">View Subscription Plans</a>
            <a href="/register" class="btn btn-outline-light btn-lg px-4 magnetic-btn">Create Free Account</a>
        </div>
    </div>
</section>

<section class="py-5 bg-light overflow-hidden">
    <div class="container">
        <div class="row align-items-center g-5">
            <div class="col-lg-6">
                <h2 class="fw-bold mb-4 risk-heading" style="color: var(--soil-brown);">Reduce Risk in Every Harvest</h2>
                <p class="lead text-muted">Agricultural markets are volatile. Without accurate data, farmers underprice their yields, and agribusinesses miscalculate their supply chains.</p>
                <p>Farmerman Systems mitigates this risk by providing an exclusive, subscriber-only dashboard that tracks live prices across regional markets like Kakamega.</p>
                
                <ul class="list-group list-group-flush mt-4">
                    <li class="list-group-item bg-transparent border-0 d-flex align-items-center ps-0 risk-item">
                        <span class="badge bg-success me-3 rounded-pill p-2">✓</span> Negotiate better prices with brokers.
                    </li>
                    <li class="list-group-item bg-transparent border-0 d-flex align-items-center ps-0 risk-item">
                        <span class="badge bg-success me-3 rounded-pill p-2">✓</span> Time your market entry for maximum profit.
                    </li>
                    <li class="list-group-item bg-transparent border-0 d-flex align-items-center ps-0 risk-item">
                        <span class="badge bg-success me-3 rounded-pill p-2">✓</span> NGOs: Direct funding based on real-time community needs.
                    </li>
                </ul>
            </div>
            
            <div class="col-lg-6">
                <div class="card border-0 shadow-lg preview-card">
                    <div class="card-body p-5 bg-white rounded text-center">
                        <h4 class="fw-bold mb-3" style="color: var(--soil-brown);">Live Dashboard Preview</h4>
                        <p class="text-muted small">Updated daily by our field intelligence team.</p>
                        <div class="d-flex justify-content-between border-bottom pb-2 mb-2">
                            <span class="fw-bold">Maize (90kg)</span>
                            <span class="text-success">▲ KES 3,400</span>
                        </div>
                        <div class="d-flex justify-content-between border-bottom pb-2 mb-2">
                            <span class="fw-bold">Soybeans (50kg)</span>
                            <span class="text-danger">▼ UGX 115,000</span>
                        </div>
                        <div class="d-flex justify-content-between pb-2 mb-3">
                            <span class="fw-bold">Sorghum (90kg)</span>
                            <span class="text-muted">▬ TZS 85,000</span>
                        </div>
                        <a href="/login" class="btn btn-outline-success w-100 mt-2 unlock-btn">Unlock Full Dashboard</a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<section class="py-5 text-center text-white overflow-hidden footer-cta" style="background-color: var(--sky-blue);">
    <div class="container">
        <h3 class="fw-bold cta-title">Ready to access the data?</h3>
        <p class="mb-4 cta-text">Subscribe instantly via M-Pesa, PayPal, Stripe, or Bank Transfer.</p>
        <a href="/pricing" class="btn btn-light btn-lg fw-bold px-5 cta-btn" style="color: var(--sky-blue);">Subscribe Now</a>
    </div>
</section>
{% endblock %}

{% block extra_js %}
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/TextPlugin.min.js"></script>

<script>
    gsap.registerPlugin(ScrollTrigger, TextPlugin);

    // 1. Decoded Hero Title
    gsap.from(".intel-title", {
        text: { value: "▓▒░█▓▒░█▓▒░█▓▒", chars: "XO!#" },
        duration: 2,
        ease: "none"
    });
    gsap.to(".intel-lead", { opacity: 1, y: 0, startAt: {y: 20}, duration: 1, delay: 1 });
    gsap.to(".intel-btns", { opacity: 1, y: 0, startAt: {y: 20}, duration: 1, delay: 1.3 });

    // 2. Risk Section Animation
    gsap.from(".risk-heading", {
        scrollTrigger: ".risk-heading",
        x: -100,
        opacity: 0,
        duration: 1,
        ease: "power2.out"
    });
    gsap.to(".risk-item", {
        scrollTrigger: ".risk-item",
        opacity: 1,
        x: 0,
        startAt: { x: -30 },
        stagger: 0.2,
        duration: 0.8
    });

    // 3. Perspective Entrance for Preview Card
    gsap.to(".preview-card", {
        scrollTrigger: ".preview-card",
        opacity: 1,
        z: 0,
        startAt: { z: -1000 },
        transformPerspective: 1000,
        duration: 1.2,
        ease: "power3.out"
    });

    // 4. Bouncy Entrance for CTA
    const ctaTl = gsap.timeline({
        scrollTrigger: { trigger: ".footer-cta", start: "top 90%" }
    });
    ctaTl.to(".cta-title", { opacity: 1, y: 0, startAt: {y: -50}, duration: 0.8, ease: "bounce.out" })
         .to(".cta-text", { opacity: 1, duration: 0.5 }, "-=0.3")
         .to(".cta-btn", { opacity: 1, scale: 1, startAt: {scale: 0.8}, duration: 0.5, ease: "back.out(1.7)" });

    // 5. Magnetic Hover Effects
    const btns = document.querySelectorAll(".magnetic-btn, .unlock-btn, .cta-btn");
    btns.forEach(btn => {
        btn.addEventListener("mousemove", (e) => {
            const rect = btn.getBoundingClientRect();
            const x = e.clientX - rect.left - rect.width / 2;
            const y = e.clientY - rect.top - rect.height / 2;
            gsap.to(btn, { x: x * 0.3, y: y * 0.3, duration: 0.3 });
        });
        btn.addEventListener("mouseleave", () => {
            gsap.to(btn, { x: 0, y: 0, duration: 0.3 });
        });
    });
</script>
{% endblock %}